# /etc/systemd/system/ethics-guard.service
[Unit]
Description=Bit.Hub Ethics Guard (ALN Enhanced)
After=network-online.target

[Service]
Type=oneshot
WorkingDirectory=/srv/runner-repo
User=runner
Group=runner
ExecStart=/srv/runner-repo/tools/ethics-guard.sh /srv/runner-repo/.bit/environment.ethics.yml strict /srv/runner-repo/compliance_report.json /srv/runner-repo/compliance_report.aln

# Hardening
ProtectSystem=strict
ProtectHome=true
NoNewPrivileges=true
PrivateTmp=true
PrivateDevices=true
ReadOnlyPaths=/
CapabilityBoundingSet=
RestrictAddressFamilies=AF_UNIX AF_INET AF_INET6
RestrictRealtime=true
LockPersonality=true
MemoryDenyWriteExecute=true

Environment=BIT_HUB_NODE_ID=selfhosted-runner-01
Environment=ALN_COMPLIANCE_MODE=1
Environment=ALN_FAILSAFE=0

[Install]
WantedBy=multi-user.target

sudo systemctl daemon-reload
sudo systemctl enable --now ethics-guard.service
sudo systemctl status ethics-guard.service
