aln: v1
kind: workflow.registry
source:
  repo: Doctor0Evil/Bit.Hub
  maintainer: XboxTeeJay
  note: >
    Registry for Bit.Hub/ALN core workflows, CI artefacts, and audits.
    Each entry is indexed for BitShell, BitHub, interpreter compatibility, and signature.

entries:
  # --- Workflows ---
  - pkg: workflows
    kind: github-actions
    symbol: compliance-guardian
    path: .github/workflows/01-compliance-guardian.yml
    status: ok
    policies: [opa, audit-trace]
    description: >
      Runs humor-reasoning model and compliance checks, producing signed, machine-readable verdicts for downstream jobs.

  - pkg: workflows
    kind: github-actions
    symbol: embedded-multisurface
    path: .github/workflows/02-embedded-multisurface.yml
    status: ok
    depends_on: [compliance-guardian]
    description: >
      Multi-surface embedded build: Rust (aarch64, x86_64), Node, Python. Generates SBOM, pushes result to IPFS. Reads verdict and records audit.

  - pkg: workflows
    kind: github-actions
    symbol: deploy-gate
    path: .github/workflows/03-deploy-gate.yml
    status: ok
    depends_on: [compliance-guardian]
    description: >
      Deployment gate workflow, requires compliance verdict before permitting deployment actions.

  # --- Build Artefacts ---
  - pkg: artefacts
    kind: rust-binary
    symbol: firmware-aarch64
    path: target/aarch64-unknown-linux-gnu/release
    status: gated
    build_from: embedded-multisurface
    requires:
      policies: [opa]
      signatures: [owner:bithub, owner:perplexity]
    description: >
      Cross-built Rust firmware for IoT/edge (aarch64, no_std, panic-halt).

  - pkg: artefacts
    kind: sbom
    symbol: cyclonedx-json
    path: sbom.json
    status: ok
    generated_by: embedded-multisurface
    description: >
      CycloneDX 1.4 Software Bill of Materials for multi-surface builds.

  - pkg: artefacts
    kind: ipfs-cid
    symbol: sbom-ipfs
    path: .bithub/audit/ipfs-publish.json
    status: ok
    generated_by: embedded-multisurface
    description: >
      JSON record of IPFS CID and SBOM metadata for decentralized audit.

  # --- Agents ---
  - pkg: agents
    kind: aln-agent
    symbol: comet-bithub-agent
    path: .bithub/agents/comet-bithub-agent.aln
    status: ok
    policies: [opa, audit-trace]
    description: >
      Browser-integrated Comet agent that monitors tabs, extracts/summarizes
      content, routes data to Bit.Hub APIs, and enforces compliance.
